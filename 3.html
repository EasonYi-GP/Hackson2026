<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Half Cup Poetry - Session</title>
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Serif+SC:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
             theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Noto Serif SC', 'serif'],
                        display: ['Playfair Display', 'serif'],
                    },
                    colors: {
                        slate: { 850: '#151e32' }
                    }
                }
            }
        }
    </script>
    
    <style>
        body { background-color: #020617; }
        .hide-scroll::-webkit-scrollbar { display: none; }
        .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }

        /* Dynamic Background */
        .mystic-bg {
            background-color: #020617;
            background-image: 
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            position: absolute; inset: 0; z-index: -1;
        }

        .serif-font { font-family: 'Noto Serif SC', serif; }
        /* Glassmorphism Panel */
        .glass-panel {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.5);
        }

        /* Animations */
        .liquid-ball {
            position: relative; width: 140px; height: 140px;
            background: #1e293b; border-radius: 50%; overflow: hidden;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.8);
            border: 2px solid rgba(167, 139, 250, 0.3); margin: 0 auto;
        }
        .liquid-wave {
            position: absolute; top: 40%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(transparent, rgba(139, 92, 246, 0.6));
            border-radius: 40%; animation: wave 6s linear infinite; opacity: 0.8;
        }
        .liquid-wave:nth-child(2) { top: 42%; animation: wave 8s linear infinite reverse; opacity: 0.4; background: linear-gradient(transparent, rgba(192, 132, 252, 0.6)); }
        @keyframes wave { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .radar-box {
            position: relative; width: 100%; height: 100%; border-radius: 50%;
            border: 1px dashed rgba(255, 255, 255, 0.1);
            background: radial-gradient(circle, rgba(16, 185, 129, 0.05) 0%, transparent 70%);
        }
        .scan-line {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: conic-gradient(from 0deg, transparent 75%, rgba(16, 185, 129, 0.5));
            border-radius: 50%; animation: scan 3s infinite linear;
        }
        .radar-blip {
            position: absolute; width: 6px; height: 6px; background: #34d399;
            border-radius: 50%; box-shadow: 0 0 8px #34d399; opacity: 0;
            animation: blip 2s infinite;
        }
        @keyframes scan { 100% { transform: rotate(360deg); } }
        @keyframes blip { 0%,100% {opacity:0;} 50% {opacity:1;} }
        
        .progress-bar-fill { height: 100%; border-radius: 999px; width: 0%; animation: fillProgress 1.5s ease-out forwards; }
        @keyframes fillProgress { to { width: var(--w); } }

        .bubble { position: absolute; bottom: -20px; background: rgba(255,255,255,0.05); border-radius: 50%; animation: floatUp linear infinite; pointer-events: none; }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 0; } 50% { opacity: 0.5; } 100% { transform: translateY(-100vh); opacity: 0; } }
    </style>
</head>
<body class="text-slate-200 min-h-screen relative font-sans overflow-x-hidden">

    <div class="mystic-bg"></div>
    <div id="bubbles"></div>

    <div class="relative z-10 flex flex-col md:flex-row min-h-screen p-2 md:p-4 gap-4 max-w-7xl mx-auto">
        <!-- Sidebar -->
        <aside class="w-full md:w-24 glass-panel flex md:flex-col items-center py-4 md:py-8 gap-6 md:gap-8 shrink-0 justify-center md:justify-start sticky top-4 z-20 h-auto md:h-[calc(100vh-2rem)]">
            <div class="w-12 h-12 rounded-full bg-gradient-to-tr from-amber-500 to-yellow-700 flex items-center justify-center font-bold text-slate-950 serif-font text-2xl shadow-[0_0_20px_rgba(245,158,11,0.4)]">
                半
            </div>
            <nav class="flex md:flex-col gap-6 items-center">
                <!-- 首页按钮：House Style -->
                <a href="1.html" class="w-14 h-14 flex items-center justify-center rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 text-white shadow-[0_0_20px_rgba(245,158,11,0.5)] hover:shadow-[0_0_30px_rgba(245,158,11,0.8)] hover:-translate-y-1 transition-all duration-300 group relative z-50 overflow-hidden ring-2 ring-amber-400/50">
                    <!-- Glow Effect -->
                    <span class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></span>
                    
                    <!-- SVG House Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-7 h-7 drop-shadow-md relative z-10 group-hover:scale-110 transition-transform">
                        <path d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z" />
                        <path d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z" />
                    </svg>
                </a>
                <a href="2.html" class="w-10 h-10 flex items-center justify-center rounded-xl text-slate-500 hover:text-slate-200 hover:bg-white/5 transition-colors" title="Back">
                    <i class="fa-solid fa-arrow-left"></i>
                </a>
                <a href="#" class="w-10 h-10 flex items-center justify-center rounded-xl text-slate-500 hover:text-slate-200 hover:bg-white/5 transition-colors">
                    <i class="fa-solid fa-user"></i>
                </a>
            </nav>
        </aside>

        <div class="flex-1 flex flex-col min-w-0 h-full">

        <header class="flex-none mb-3 flex justify-between items-end border-b border-white/5 pb-2">
            <div>
                <p class="text-[10px] text-indigo-400 uppercase tracking-[0.2em] mb-1 font-medium">Half Cup Poetry Society</p>
                <h1 class="text-2xl font-bold font-serif text-white flex items-baseline gap-3">
                    您的微醺会话
                    <span class="font-display text-lg text-slate-500 italic font-normal">Your Current Session</span>
                </h1>
            </div>
            <div class="text-right">
                <div class="flex items-center gap-2 bg-slate-800/50 border border-slate-700/50 rounded-full px-3 py-1">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    <span class="text-xs text-slate-300 font-medium tracking-wide">LIVE</span>
                </div>
            </div>
        </header>

        <!-- CONTENT -->
        <div class="flex-1 min-h-0 flex flex-col lg:flex-row gap-3 overflow-y-auto hide-scroll pb-2">
            
            <!-- LEFT COLUMN: Order & Taste Analysis -->
            <section class="flex-1 flex flex-col gap-3">
                
                <!-- 1. Order Status -->
                <div class="glass-panel p-5 h-60 flex flex-col justify-between">
                    
                    <!-- Upper: Order Details -->
                    <div class="flex justify-between items-start">
                        <div class="flex items-start gap-6">
                            <!-- Dynamic Icon (Replaced Emoji) -->
                            <div class="w-16 h-16 rounded-2xl bg-slate-900/60 flex items-center justify-center shrink-0 border border-amber-500/30 shadow-[0_0_15px_rgba(245,158,11,0.1)]">
                                <i class="fa-solid fa-martini-glass-citrus text-3xl text-amber-500 animate-pulse"></i>
                            </div>
                            
                            <!-- Text Info -->
                            <div>
                                <h2 class="text-xl font-bold text-white mb-2 flex items-center gap-2">
                                    正在调制 <span class="text-amber-500 text-xs border border-amber-500/30 px-2 py-0.5 rounded-full bg-amber-500/10">MIXING</span>
                                </h2>
                                <p class="font-display text-sm text-slate-500 italic mb-2">Mixing in progress...</p>
                                <div class="text-sm text-slate-300 space-y-1 h-24 overflow-y-auto hide-scroll" id="orderList">
                                    <p class="flex items-center gap-2"><i class="fa-solid fa-circle text-[6px] text-slate-500"></i> 莫吉托 (Mojito) <span class="text-slate-500 text-xs">x 1</span></p>
                                    <p class="flex items-center gap-2"><i class="fa-solid fa-circle text-[6px] text-slate-500"></i> 炸薯条 (Fries) <span class="text-slate-500 text-xs">x 1</span></p>
                                </div>
                            </div>
                        </div>

                        <!-- Timer -->
                        <div class="text-right bg-slate-800/30 px-4 py-2 rounded-lg border border-white/5">
                            <p class="text-[10px] text-slate-500 uppercase tracking-widest mb-1">Estimated Wait</p>
                            <p class="text-2xl font-display text-amber-400 font-bold">8 <span class="text-sm font-normal text-slate-500 font-sans">mins</span></p>
                        </div>
                    </div>
                    
                    <!-- Lower: Progress Bar -->
                    <div class="relative pt-2 pb-1">
                        <!-- Track with precise top alignment to match dots -->
                        <div class="absolute top-[14px] left-0 w-full h-0.5 bg-slate-800 -z-10 rounded"></div>
                        <!-- Fill -->
                        <div class="absolute top-[14px] left-0 w-1/2 h-0.5 bg-gradient-to-r from-amber-500/50 to-amber-500 -z-10 rounded layer-1"></div>

                        <div class="flex justify-between items-center text-[10px] uppercase font-bold tracking-wider">
                            <!-- Node 1 -->
                            <div class="flex flex-col items-center gap-3">
                                <div class="w-3 h-3 rounded-full bg-green-500 shadow-[0_0_10px_#22c55e]"></div>
                                <span class="text-green-500">Confirmed</span>
                            </div>
                            <!-- Node 2 (Current) -->
                            <div class="flex flex-col items-center gap-2">
                                <div class="w-5 h-5 rounded-full bg-slate-900 border-2 border-amber-500 flex items-center justify-center shadow-[0_0_10px_#f59e0b]">
                                    <div class="w-2 h-2 bg-amber-500 rounded-full animate-ping"></div>
                                </div>
                                <span class="text-amber-500">Mixing Now</span>
                            </div>
                            <!-- Node 3 -->
                            <div class="flex flex-col items-center gap-3">
                                <div class="w-3 h-3 rounded-full bg-slate-700"></div>
                                <span class="text-slate-400">Serving</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. Taste DNA (Analysis) -->
                <div class="glass-panel p-5 flex-1 flex flex-col">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-serif text-slate-100 flex items-center gap-2">
                            味蕾基因图谱
                            <span class="font-display text-sm text-slate-500 italic">Taste DNA Matrix</span>
                        </h3>
                        <span class="text-[10px] text-indigo-400 border border-indigo-500/30 px-2 py-0.5 rounded">ANALYZED</span>
                    </div>
                    
                    <div class="space-y-4 flex-1 flex flex-col justify-center px-1">
                        <!-- Sweetness -->
                        <div class="group">
                            <div class="flex justify-between text-xs mb-1">
                                <span class="text-slate-300">甜度 / <span class="text-slate-500">Sweetness</span></span>     
                                <span class="font-mono text-pink-400">75%</span>
                            </div>
                            <div class="h-1.5 bg-slate-800 rounded-full overflow-hidden">
                                <div class="progress-bar-fill group-hover:brightness-125 transition-all" style="--w: 75%; background: linear-gradient(90deg, #ec4899, #d946ef);"></div>
                            </div>
                        </div>
                        <!-- Acidity -->
                        <div class="group">
                            <div class="flex justify-between text-xs mb-1">
                                <span class="text-slate-300">酸度 / <span class="text-slate-500">Acidity</span></span>     
                                <span class="font-mono text-lime-400">60%</span>
                            </div>
                            <div class="h-1.5 bg-slate-800 rounded-full overflow-hidden">
                                <div class="progress-bar-fill group-hover:brightness-125 transition-all" style="--w: 60%; background: linear-gradient(90deg, #84cc16, #a3e635);"></div>
                            </div>
                        </div>
                        <!-- Alcohol -->
                        <div class="group">
                            <div class="flex justify-between text-xs mb-1">
                                <span class="text-slate-300">烈度 / <span class="text-slate-500">Intensity</span></span>     
                                <span class="font-mono text-red-400">15%</span>
                            </div>
                            <div class="h-1.5 bg-slate-800 rounded-full overflow-hidden">
                                <div class="progress-bar-fill group-hover:brightness-125 transition-all" style="--w: 15%; background: linear-gradient(90deg, #f87171, #ef4444);"></div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 pt-4 border-t border-dashed border-slate-700/50">
                        <div class="flex gap-3 items-start">
                            <span class="text-lg mt-0.5 text-indigo-400"><i class="fa-solid fa-wand-magic-sparkles"></i></span>
                            <div>
                                <p class="text-xs text-indigo-300 font-bold mb-0.5 uppercase tracking-wide">Insight</p>
                                <p class="text-xs text-slate-400 leading-relaxed italic">
                                    "Your choice suggests a preference for clarity and joy. <br>
                                    您的选择透着一种轻松的愉悦感。"
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- RIGHT COLUMN: Resonance & Social -->
            <section class="w-full lg:w-96 flex flex-col gap-3">
                
                <!-- 1. Resonance (Liquid Orb) -->
                <div class="glass-panel p-5 h-60 flex flex-col items-center justify-center relative">
                    <h3 class="text-xs font-bold text-slate-500 mb-2 uppercase tracking-widest text-center">
                        Bar Resonance<br><span class="text-[10px] text-slate-600">场所共鸣度</span>
                    </h3>
                    
                    <div class="liquid-ball mb-3 group cursor-pointer transition-transform hover:scale-105 duration-500" style="width: 90px; height: 90px;">
                        <div class="liquid-wave"></div>
                        <div class="liquid-wave"></div>
                        <div class="absolute inset-0 flex flex-col items-center justify-center z-10">
                            <span class="block text-2xl font-bold text-white drop-shadow-md font-display">92%</span>
                        </div>
                    </div>

                    <div class="text-center">
                        <p class="text-xs text-purple-200 font-serif mb-0.5">灵魂契合</p>
                        <p class="text-[9px] text-slate-500 uppercase tracking-wider">Soul Match</p>
                    </div>
                </div>

                <!-- 2. Radar (Visual) -->
                <div class="glass-panel p-5 flex-1 flex flex-col justify-center min-h-[220px]">
                    <div class="flex justify-between items-center mb-4 px-1">
                        <span class="text-xs text-slate-400 uppercase tracking-widest font-bold">Nearby Vibes</span>
                        <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span>
                            <span class="text-xs text-emerald-500/80 font-bold">SCANNING...</span>
                        </div>
                    </div>

                    <div class="flex items-center gap-6 relative">
                        <!-- Radar Visual -->
                        <div class="w-32 h-32 shrink-0 flex items-center justify-center">
                            <div class="radar-box shadow-[0_0_20px_rgba(16,185,129,0.1)]">
                                <div class="scan-line"></div>
                                <!-- Blips -->
                                <div class="radar-blip" style="top: 30%; left: 70%; animation-delay: 0.2s"></div>
                                <div class="radar-blip" style="top: 60%; left: 20%; animation-delay: 1.5s"></div>
                                <div class="absolute top-1/2 left-1/2 w-2 h-2 bg-white rounded-full -translate-x-1/2 -translate-y-1/2 shadow-[0_0_15px_white]"></div>
                            </div>
                        </div>

                        <!-- Text Info & Faces -->
                        <div class="flex-1 space-y-4">
                            <div>
                                <p class="text-lg text-slate-200 font-bold">附近的相似灵魂</p>
                                <p class="text-xs text-slate-500 font-display italic">Similar souls nearby</p>
                            </div>
                            
                            <!-- Fixed: Missing Icons (Replaced with DiceBear) -->
                            <div class="flex -space-x-2 py-1">
                                <img class="w-8 h-8 rounded-full border border-slate-700 bg-slate-800 object-cover" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="Avatar">
                                <img class="w-8 h-8 rounded-full border border-slate-700 bg-slate-800 object-cover" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka" alt="Avatar">
                                <img class="w-8 h-8 rounded-full border border-slate-700 bg-slate-800 object-cover" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Zoe" alt="Avatar">
                                <div class="w-8 h-8 rounded-full border border-slate-700 bg-slate-800 text-[10px] flex items-center justify-center text-slate-400 font-mono">+3</div>
                            </div>
                            
                            <!-- Fixed: Button with Icon -->
                            <button class="w-full flex items-center justify-center gap-2 text-[10px] text-indigo-400 hover:text-white hover:bg-indigo-500/20 hover:border-indigo-400 transition-all border border-indigo-500/30 rounded py-1.5 group">
                                <span>Say Hi</span>
                                <i class="fa-solid fa-hand-sparkles group-hover:animate-bounce"></i>
                            </button>
                        </div>
                    </div>
                </div>

            </section>
        
        </div>

        <!-- FOOTER -->
        <footer class="flex-none pt-2 text-center border-t border-white/5 mt-2 opacity-50 hover:opacity-100 transition-opacity">
            <p class="text-[10px] text-slate-500 font-medium">
                HALF CUP POETRY SOCIETY <span class="mx-2">•</span> <span class="font-mono">EST. 2026</span>
            </p>
        </footer>

    </div>
    </div>

    <script>
        // Load Order Data from 1.html (LocalStorage)
        window.addEventListener('load', () => {
            const orderData = localStorage.getItem('currentSessionOrder');
            if(orderData) {
                try {
                    const list = JSON.parse(orderData);
                    const container = document.getElementById('orderList');
                    
                    if(list && list.length > 0 && container) {
                        container.innerHTML = ''; // Clear default static items
                        
                        list.forEach(item => {
                            // Format: Icon + Name + Qty
                            container.innerHTML += `
                                <p class="flex items-center justify-between pr-2">
                                    <span class="flex items-center gap-2 truncate">
                                        <i class="fa-solid fa-circle text-[6px] text-amber-500"></i> 
                                        ${item.name}
                                    </span>
                                    <span class="text-slate-500 text-xs shrink-0 bg-slate-800 px-1.5 rounded">x ${item.count}</span>
                                </p>
                            `;
                        });
                    }
                } catch(e) {
                    console.error("Failed to parse order data", e);
                }
            }
        });

        const container = document.getElementById('bubbles');
        for(let i=0; i<20; i++) {
            const b = document.createElement('div');
            b.className = 'bubble';
            const size = Math.random() * 60 + 20;
            b.style.width = size + 'px'; b.style.height = size + 'px';
            b.style.left = Math.random() * 100 + 'vw';
            b.style.animationDuration = (Math.random() * 10 + 15) + 's';
            b.style.animationDelay = (Math.random() * 5) + 's';
            container.appendChild(b);
        }
    </script>
</body>
</html>