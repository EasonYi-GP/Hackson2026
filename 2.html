<!DOCTYPE html>
<!-- saved from url=(0038)file:///C:/V_F/work-doc/Hack/UI2.html# -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠæ¯è¯—ç¤¾</title>
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Serif+SC:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
             theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Noto Serif SC', 'serif'],
                        display: ['Playfair Display', 'serif'],
                    },
                    colors: {
                        slate: { 850: '#151e32' }
                    }
                }
            }
        }
    </script>
    <style>
        /* å…¨å±€éšè—æ‰€æœ‰æ»šåŠ¨æ¡ */
        * {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }
        *::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
            width: 0;
            height: 0;
        }

        body { font-family: 'Inter', sans-serif; }
        .serif-font { font-family: 'Noto Serif SC', serif; }

        .hide-scroll::-webkit-scrollbar { width: 4px; }
        .hide-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 2px; }
        .hide-scroll::-webkit-scrollbar-track { background: transparent; }

        /* æ·±æ¸ŠèƒŒæ™¯ */
        .abyssal-bg {
            background-color: #020617;
            background-image:
                radial-gradient(circle at 15% 50%, rgba(30, 27, 75, 0.4) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(15, 23, 42, 0.6) 0%, transparent 25%);
            min-height: 100vh;
        }

        /* ç»ç’ƒé¢æ¿ */
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.03);
            border-radius: 20px;
        }

        /* Dynamic Background */
        .mystic-bg {
            background-color: #020617;
            background-image:
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%),
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%),
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            position: absolute; inset: 0; z-index: -1;
        }

        .bubble {
            position: absolute;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, rgba(167, 139, 250, 0.7), rgba(139, 92, 246, 0.5));
            border-radius: 50%;
            animation: floatUpLazy ease-in-out infinite;
            pointer-events: none;
            box-shadow:
                inset 0 0 25px rgba(167, 139, 250, 0.6),
                0 0 40px rgba(139, 92, 246, 0.5),
                0 0 60px rgba(167, 139, 250, 0.3);
            backdrop-filter: blur(4px);
            border: 2px solid rgba(167, 139, 250, 0.6);
        }
        @keyframes floatUpLazy {
            0% { transform: translateY(0) translateX(0); opacity: 0; }
            5% { opacity: 0.85; }
            50% { opacity: 0.95; transform: translateY(-50vh) translateX(var(--drift)); }
            95% { opacity: 0.8; }
            100% { transform: translateY(-100vh) translateX(calc(var(--drift) * 1.5)); opacity: 0; }
        }

        .serif-font { font-family: 'Noto Serif SC', serif; }

        .glass-panel {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.5);
        }

        /* é€‰ä¸­å¡ç‰‡ç‰¹æ•ˆ */
        .tribe-card { transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        .tribe-card:hover { transform: translateY(-4px); border-color: rgba(255, 255, 255, 0.1); }
        
        .tribe-radio:checked + label {
            border-color: #d4af37;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.05), rgba(15, 23, 42, 0.9));
            box-shadow: 0 0 30px -10px rgba(212, 175, 55, 0.2);
            animation: pulse-border 2s infinite;
        }
        @keyframes pulse-border {
            0% { border-color: rgba(212, 175, 55, 0.5); }
            50% { border-color: rgba(212, 175, 55, 1); }
            100% { border-color: rgba(212, 175, 55, 0.5); }
        }

        .tribe-radio:checked + label .check-icon { opacity: 1; transform: scale(1); }
        .check-icon { opacity: 0; transform: scale(0.5); transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }

        /* åˆ—è¡¨å…¥åœºåŠ¨ç”» */
        .list-enter {
            animation: slideUpFade 0.5s ease forwards;
            opacity: 0; transform: translateY(20px);
        }
        @keyframes slideUpFade {
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="text-slate-200 min-h-screen relative font-sans overflow-x-hidden">

    <div class="mystic-bg"></div>

    <!-- å…¨å±€å®¹å™¨ï¼šFlex å…è®¸æ»šåŠ¨ï¼Œè§£å†³é®æŒ¡ -->
    <div class="relative z-10 flex flex-col md:flex-row min-h-screen p-2 md:p-4 gap-4 max-w-7xl mx-auto overflow-x-hidden">

        <!-- å·¦ä¾§å¯¼èˆªæ  -->
        <aside class="glass-panel w-full lg:w-64 flex flex-col p-6 shadow-2xl shrink-0 lg:h-[calc(100vh-2rem)] lg:sticky lg:top-4">
            <div class="mb-8 flex lg:block items-center justify-between">
                <div>
                    <p class="text-[10px] text-amber-700/80 tracking-[0.3em] font-bold">EST. 2026</p>
                    <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-br from-amber-100 to-amber-600 serif-font mt-1">
                        åŠæ¯è¯—ç¤¾
                    </h1>
                </div>
                <button class="lg:hidden text-slate-400">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>
            </div>

            <!-- å¯¼èˆªèœå• -->
            <nav class="hidden lg:flex flex-col gap-2 flex-1">
                <a href="1.html" class="flex items-center gap-3 px-4 py-3 text-slate-500 hover:text-slate-300 hover:bg-white/5 rounded-xl transition-all group">
                    <svg class="w-5 h-5 group-hover:text-amber-500/50 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                    </svg>
                    <span>å¤§å… Hall</span>
                </a>
                <a href="2.html" class="flex items-center gap-3 px-4 py-3 bg-white/5 text-amber-50 rounded-xl border border-white/5 font-medium transition-all group">
                    <svg class="w-5 h-5 text-amber-500/80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                    <span>æ–°äººå‘å¯¼ Guide</span>
                </a>
                <a href="3.html" class="flex items-center gap-3 px-4 py-3 text-slate-500 hover:text-slate-300 hover:bg-white/5 rounded-xl transition-all group">
                    <svg class="w-5 h-5 group-hover:text-amber-500/50 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                    </svg>
                    <span>å¾®é†ºä¼šè¯ Session</span>
                </a>
                <a href="4.html" class="flex items-center gap-3 px-4 py-3 text-slate-500 hover:text-slate-300 hover:bg-white/5 rounded-xl transition-all group">
                    <svg class="w-5 h-5 group-hover:text-amber-500/50 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    <span>åœˆå­ Circles</span>
                </a>
                <a href="6.html" class="flex items-center gap-3 px-4 py-3 text-slate-500 hover:text-slate-300 hover:bg-white/5 rounded-xl transition-all group">
                    <svg class="w-5 h-5 group-hover:text-amber-500/50 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span>æˆ‘çš„æ¡£æ¡ˆ Profile</span>
                </a>
            </nav>

            <!-- ç”¨æˆ·ä¿¡æ¯ -->
            <div class="hidden lg:flex mt-auto pt-6 border-t border-white/5 items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-amber-900/30 border border-amber-500/20 flex items-center justify-center text-amber-500 font-bold text-xs ring-4 ring-black">
                    ME
                </div>
                <div>
                    <p class="text-sm text-amber-500/80 font-bold">é…’å®¢ #0608</p>
                    <p class="text-[10px] text-slate-500">å¾®é†ºæ¢é™©å®¶</p>
                </div>
            </div>
        </aside>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="flex-1 flex flex-col gap-6 w-full min-w-0 pb-4 lg:h-[calc(100vh-2rem)] lg:sticky lg:top-4 overflow-hidden">

            <!-- é¡¶éƒ¨å¼•å¯¼è¯­ -->
            <header class="glass-panel p-6 animate-fade-in-down">
                <div class="flex items-center gap-3 mb-3">
                    <h1 class="text-3xl font-bold serif-font text-transparent bg-clip-text bg-gradient-to-r from-slate-100 to-slate-400">æ–°äººå‘å¯¼</h1>
                </div>
                <p class="text-slate-300 max-w-3xl text-sm leading-relaxed">åˆæ¬¡è§é¢ï¼Œä¸ºäº†è®© <span class="text-amber-500 font-serif italic font-bold">Sommelier</span> æ›´æ‡‚ä½ ï¼Œè¯·å‡­ç›´è§‰é€‰æ‹©ä¸€ä¸ª"é£å‘³éƒ¨è½"ï¼Œè¿™å°†å†³å®šä½ çš„åˆå§‹æ¨èé…’å•ã€‚</p>
            </header>

            <!-- æ­¥éª¤ 1: é€‰å°ç»„ (Responsive Grid) - å¢å¤§å¡ç‰‡å°ºå¯¸ -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Card 1 -->
                <div class="relative group">
                    <input type="radio" name="tribe" id="tribe1" class="tribe-radio hidden" onchange="selectTribe(0)">
                    <label for="tribe1" class="tribe-card block h-full p-5 rounded-2xl glass-panel border border-slate-700/50 cursor-pointer hover:bg-white/5 relative overflow-hidden flex flex-col items-start gap-1.5 transition-all min-h-[145px]">
                        <div class="w-full">
                            <h3 class="text-xl font-bold text-slate-100 serif-font flex items-center justify-between w-full mb-2">
                                <span class="flex items-center gap-3">
                                    æ¸…çˆ½é…¸ç”œ
                                    <span class="text-3xl group-hover:scale-110 transition-transform duration-500">ğŸ‹</span>
                                </span>
                                <div class="w-6 h-6 rounded-full bg-amber-500 flex items-center justify-center check-icon text-black text-sm"><i class="fa-solid fa-check"></i></div>
                            </h3>
                            <p class="text-sm text-slate-400 leading-snug">è®¨åŒé…’ç²¾å‘³ï¼Œåçˆ±é²œæœã€è‹æ‰“æˆ–æ°”æ³¡æ°´çš„è½»ç›ˆã€‚</p>
                        </div>
                    </label>
                </div>

                <!-- Card 2 -->
                <div class="relative group">
                    <input type="radio" name="tribe" id="tribe2" class="tribe-radio hidden" onchange="selectTribe(1)">
                    <label for="tribe2" class="tribe-card block h-full p-5 rounded-2xl glass-panel border border-slate-700/50 cursor-pointer hover:bg-white/5 relative overflow-hidden flex flex-col items-start gap-1.5 transition-all min-h-[145px]">
                        <div class="w-full">
                            <h3 class="text-xl font-bold text-slate-100 serif-font flex items-center justify-between w-full mb-2">
                                <span class="flex items-center gap-3">
                                    ç»µå¯†å¥¶é¦™
                                    <span class="text-3xl group-hover:scale-110 transition-transform duration-500">â˜ï¸</span>
                                </span>
                                <div class="w-6 h-6 rounded-full bg-amber-500 flex items-center justify-center check-icon text-black text-sm"><i class="fa-solid fa-check"></i></div>
                            </h3>
                            <p class="text-sm text-slate-400 leading-snug">ç™¾åˆ©ç”œã€å·§å…‹åŠ›æˆ–ç‰›å¥¶è´¨åœ°ï¼Œåƒæ˜¯å–"å¤§äººçš„ç”œç‚¹"ã€‚</p>
                        </div>
                    </label>
                </div>

                <!-- Card 3 -->
                <div class="relative group">
                    <input type="radio" name="tribe" id="tribe3" class="tribe-radio hidden" onchange="selectTribe(2)">
                    <label for="tribe3" class="tribe-card block h-full p-5 rounded-2xl glass-panel border border-slate-700/50 cursor-pointer hover:bg-white/5 relative overflow-hidden flex flex-col items-start gap-1.5 transition-all min-h-[145px]">
                        <div class="w-full">
                            <h3 class="text-xl font-bold text-slate-100 serif-font flex items-center justify-between w-full mb-2">
                                <span class="flex items-center gap-3">
                                    ç¡¬æ ¸çº¯é¥®
                                    <span class="text-3xl group-hover:scale-110 transition-transform duration-500">ğŸ¥ƒ</span>
                                </span>
                                <div class="w-6 h-6 rounded-full bg-amber-500 flex items-center justify-center check-icon text-black text-sm"><i class="fa-solid fa-check"></i></div>
                            </h3>
                            <p class="text-sm text-slate-400 leading-snug">å¯ä»¥æ¥å—çƒˆé…’ã€‚å“ªæ€•åªæœ‰é…’ã€å†°å—å’Œæ©¡æœ¨æ¡¶å‘³ã€‚</p>
                        </div>
                    </label>
                </div>

                <!-- Card 4 -->
                <div class="relative group">
                    <input type="radio" name="tribe" id="tribe4" class="tribe-radio hidden" onchange="selectTribe(3)">
                    <label for="tribe4" class="tribe-card block h-full p-5 rounded-2xl glass-panel border border-slate-700/50 cursor-pointer hover:bg-white/5 relative overflow-hidden flex flex-col items-start gap-1.5 transition-all min-h-[145px]">
                        <div class="w-full">
                            <h3 class="text-xl font-bold text-slate-100 serif-font flex items-center justify-between w-full mb-2">
                                <span class="flex items-center gap-3">
                                    è‰æœ¬å¾®è‹¦
                                    <span class="text-3xl group-hover:scale-110 transition-transform duration-500">ğŸŒ¿</span>
                                </span>
                                <div class="w-6 h-6 rounded-full bg-amber-500 flex items-center justify-center check-icon text-black text-sm"><i class="fa-solid fa-check"></i></div>
                            </h3>
                            <p class="text-sm text-slate-400 leading-snug">é‡‘æ±¤åŠ›æˆ–å°¼æ ¼ç½—å°¼ã€‚äº«å—é‚£ç§å¤æ‚è€Œæˆç†Ÿçš„å›ç”˜ã€‚</p>
                        </div>
                    </label>
                </div>
            </div>

            <!-- æ­¥éª¤ 2: åŠ¨æ€æ¨èå±•ç¤ºåŒº (ä¸‹æ–¹å¤§é¢æ¿) -->
            <!-- è¿™é‡Œä½¿ç”¨ flex-col lg:flex-row è®©æ‰‹æœºç«¯å‚ç›´æ’åˆ— -->
            <div id="recPanel" class="glass-panel w-full p-6 lg:p-8 flex flex-col lg:flex-row gap-6 transition-all duration-500 flex-1 opacity-100 pointer-events-auto">

                <!-- å·¦ä¾§ï¼šç®€ä»‹ -->
                <div class="w-full lg:w-1/3 border-b lg:border-b-0 lg:border-r border-slate-700/50 pb-6 lg:pb-0 lg:pr-8 flex flex-col">
                    <span class="text-xs font-bold text-amber-500 tracking-[0.2em] uppercase mb-3">Selected Tribe</span>
                    <h2 class="text-3xl font-bold serif-font text-white mb-4 transition-all duration-300" id="selectedTribeName" style="opacity: 1;">ç¡¬æ ¸çº¯é¥®å…š Â· Hardcore</h2>
                    <p class="text-sm text-slate-300 leading-relaxed mb-6 flex-1" id="selectedTribeDesc">2,100 ä½è€é¥•çš„é€‰æ‹©ã€‚è¿™é‡Œæ²¡æœ‰æœæ±å…‘æ°´ï¼Œåªæœ‰çƒˆé…’æœ¬èº«çš„é£å‘³â€”â€”æ³¥ç…¤ã€æ©¡æœ¨æ¡¶ã€çƒŸç†ã€‚</p>

                    <div class="mt-auto pt-6">
                        <!-- Quick Order Button -->
                        <button id="orderBtn" onclick="toggleOrderMode()" class="w-full mb-4 py-4 rounded-xl text-base font-bold transition-all flex items-center justify-center gap-3 group bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg shadow-emerald-900/50 border border-emerald-500/30">
                            <span>ä¸€é”®å¼ç‚¹å•</span>
                            <i class="fa-solid fa-receipt group-hover:rotate-12 transition-transform"></i>
                        </button>

                        <button id="joinBtn" onclick="openMemberModal()" class="w-full py-4 rounded-xl text-base font-bold transition-all flex items-center justify-center gap-3 group bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg shadow-indigo-900/50">
                            <span>åŠ å…¥è¯¥éƒ¨è½</span>
                            <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                        </button>
                         <div class="flex items-center justify-center gap-2 mt-4 text-xs text-slate-500">
                            <i class="fa-solid fa-shield-halved"></i> ä½ çš„é€‰æ‹©å°†è¢«ä¿å¯†
                        </div>
                    </div>
                </div>

                <!-- å³ä¾§ï¼šæ¨èé…’å• -->
                <div class="w-full lg:w-2/3 flex flex-col">
                    <div class="flex justify-between items-end mb-3 border-b border-white/5 pb-2">
                        <h3 class="text-lg font-bold text-slate-200 flex items-center gap-2">
                            <i class="fa-solid fa-wand-magic-sparkles text-indigo-400"></i> å°ç™½å¿…è¯• (Starter Pack)
                        </h3>
                        <span class="text-sm text-slate-400">å·²æŒ‰å¥½å…¥å£ç¨‹åº¦æ’åº</span>
                    </div>
                    
                    <!-- åˆ—è¡¨å®¹å™¨ -->
                    <!-- JS will inject here -->
                    <div class="grid grid-cols-1 gap-2.5 flex-1" id="recContainer">
                        <!-- Items injected via JS -->
                    </div>
                    
                    <!-- New Settlement Panel (Initially Hidden) -->
                    <div id="settlementPanel" class="hidden mt-6 pt-6 border-t border-white/10 animate-fade-in-up">
                        <button id="payBtn" onclick="payOrder()" class="w-full h-14 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-slate-900 rounded-xl font-bold shadow-lg shadow-amber-900/30 transition-all flex justify-between items-center px-4 active:scale-[0.98] group border border-amber-400/30">
                            <!-- Left: Icon & Label -->
                            <div class="flex items-center gap-3">
                                <div class="w-9 h-9 rounded-lg bg-slate-900/10 flex items-center justify-center text-slate-900 group-hover:bg-slate-900/20 transition-colors">
                                    <i class="fa-solid fa-wallet text-sm"></i>
                                </div>
                                <div class="flex flex-col items-start justify-center">
                                    <span class="text-sm font-bold leading-none">ç«‹å³æ”¯ä»˜</span>
                                    <span class="text-[9px] opacity-70 font-bold uppercase tracking-wide mt-0.5">Checkout</span>
                                </div>
                            </div>
                            
                            <!-- Right: Total Amount -->
                             <div class="text-right pl-4 border-l border-slate-900/10 flex flex-col justify-center">
                                <div class="text-[9px] text-slate-800/60 uppercase tracking-wider font-bold leading-none mb-0.5">Total</div>
                                <span class="text-lg font-bold font-mono tracking-wider leading-none" id="settlementTotal">Â¥ 0</span>
                            </div>
                        </button>
                    </div>
                </div>
                </div>

            </div>
        </main>

    </div>

    <script>

        const tribeData = [
            {
                name: "æ¸…çˆ½é…¸ç”œæ´¾ Â· FreshAir",
                desc: "è¿™ä¸ªå°ç»„ç”± 1,240+ ä½å–œæ¬¢è½»æ¾æ°›å›´çš„é…’å‹ç»„æˆã€‚é…’ç²¾åº¦é€šå¸¸è¾ƒä½ï¼ˆ<10%ï¼‰ï¼Œå¤§é‡ä½¿ç”¨é²œæœæ±ã€è‹æ‰“æ°´å’Œè–„è·ï¼Œæ˜¯ç»ä½³çš„å¼€åœºé…’ã€‚",
                theme: "indigo",
                products: [
                    { name: "è«å‰æ‰˜ (Mojito)", price: 68, desc: "è–„è·ä¸é’æŸ çš„å¤æ—¥äºŒé‡å¥ï¼Œç»å¯¹å®‰å…¨ç‰Œã€‚", tags: ["ä¸è¸©é›·", "å¾®ç”œ"], icon: "ğŸŒ¿" },
                    { name: "é‡‘æ±¤åŠ› (Gin Tonic)", price: 58, desc: "é‡‘é…’åŠ æ±¤åŠ›æ°´ï¼Œæ¸…å†½çš„æ°”æ³¡æ„Ÿï¼Œæ— æ¯”å¹²å‡€ã€‚", tags: ["ç»å…¸"], icon: "ğŸ§Š" },
                    { name: "è«æ–¯ç§‘éª¡å­", price: 72, desc: "å§œæ±å•¤é…’å¸¦æ¥çš„å¾®è¾£æ¿€çˆ½ï¼Œé“œæ¯ç‰¹é¥®ã€‚", tags: ["é“œæ¯"], icon: "ğŸº" },
                    { name: "æŸšå­å—¨æ£’", price: 65, desc: "æ—¥æœ¬æŸšå­é…’åŠ è‹æ‰“ï¼Œåƒæ˜¯æœæ±æ±½æ°´ã€‚", tags: ["ä½åº¦"], icon: "ğŸŠ" }
                ]
            },
            {
                name: "ç»µå¯†å¥¶é¦™ç»„ Â· Creamy",
                desc: "856 ä½ç”œé£Ÿçˆ±å¥½è€…çš„èšé›†åœ°ã€‚å¦‚æœä½ è§‰å¾—â€œé…’å‘³â€å¾ˆè‹¦ï¼Œé€‰è¿™é‡Œå‡†æ²¡é”™ã€‚å£æ„ŸåƒèåŒ–çš„å†°æ·‡æ·‹æˆ–æ‹¿é“ã€‚",
                theme: "orange",
                products: [
                    { name: "ç™¾åˆ©ç”œç‰›å¥¶", price: 55, desc: "å°±åƒåœ¨å–æˆäººç‰ˆçš„å·§å…‹åŠ›å¥¶ï¼Œæå…¶ä¸æ»‘ã€‚", tags: ["å¥³ç”Ÿæœ€çˆ±"], icon: "ğŸ¥›" },
                    { name: "ç™½è‰²ä¿„ç½—æ–¯", price: 68, desc: "å’–å•¡åˆ©å£é…’åŠ ä¼ç‰¹åŠ ä¸é²œå¥¶æ²¹ã€‚", tags: ["ã€Šç”Ÿæ´»å¤§çˆ†ç‚¸ã€‹"], icon: "ğŸ§‰" },
                    { name: "äºšå†å±±å¤§", price: 88, desc: "ç™½å…°åœ°ä¸å¯å¯çš„ç»“åˆï¼Œé¤åç”œç‚¹é…’ã€‚", tags: ["ç”œç¾"], icon: "ğŸ¦" }
                ]
            },
            {
                name: "ç¡¬æ ¸çº¯é¥®å…š Â· Hardcore",
                desc: "2,100 ä½è€é¥•çš„é€‰æ‹©ã€‚è¿™é‡Œæ²¡æœ‰æœæ±å…‘æ°´ï¼Œåªæœ‰çƒˆé…’æœ¬èº«çš„é£å‘³â€”â€”æ³¥ç…¤ã€æ©¡æœ¨æ¡¶ã€çƒŸç†ã€‚",
                theme: "amber",
                products: [
                    { name: "æ ¼å…°è²è¿ª 12å¹´", price: 88, desc: "æœ€ç»å…¸çš„å•ä¸€éº¦èŠ½å¨å£«å¿Œï¼Œé’è‹¹æœé¦™æ°”ã€‚", tags: ["æ–°æ‰‹å…¥é—¨"], icon: "ğŸ¥ƒ" },
                    { name: "è€å¼ (Old Fashioned)", price: 98, desc: "åªæœ‰é…’ã€æ–¹ç³–å’Œè‹¦ç²¾ï¼Œè‡´æ•¬ç»å…¸ã€‚", tags: ["ç¡¬æ±‰"], icon: "ğŸªµ" },
                    { name: "æ•™çˆ¶ (Godfather)", price: 92, desc: "å¨å£«å¿ŒåŠ æä»åˆ©å£é…’ï¼Œç”œä¸­å¸¦çƒˆã€‚", tags: ["ç”µå½±"], icon: "ğŸï¸" }
                ]
            },
            {
                name: "è‰æœ¬å¾®è‹¦ç³» Â· Herbal",
                desc: "603 ä½å°ä¼—å£å‘³æ¢ç´¢è€…ã€‚å¦‚æœä½ å–œæ¬¢å’–å•¡çš„è‹¦æˆ–è‰è¯çš„é¦™ï¼Œè¿™é‡Œçš„é…’ä¼šè®©ä½ è§‰å¾—å¾ˆæœ‰æ·±åº¦ã€‚",
                theme: "teal",
                products: [
                    { name: "å°¼æ ¼ç½—å°¼", price: 78, desc: "é‡‘é…’ã€é‡‘å·´åˆ©ã€å‘³ç¾æ€ï¼Œè‹¦ç”œå¹³è¡¡ã€‚", tags: ["é¤å‰å¼€èƒƒ"], icon: "ğŸŠ" },
                    { name: "é˜¿ä½©ç½—å…‰ç¯", price: 65, desc: "æ„å¤§åˆ©æœ€æµè¡Œçš„æ©™è‰²æ°”æ³¡ï¼Œå¾®è‹¦å›ç”˜ã€‚", tags: ["è½æ—¥è‰²"], icon: "ğŸ¹" },
                    { name: "çº¸é£æœº (Paper Plane)", price: 82, desc: "æ³¢æœ¬å¨å£«å¿Œä¸é˜¿ç›ç½—è‰è¯é…’çš„å®Œç¾å¹³è¡¡ã€‚", tags: ["å¹³è¡¡"], icon: "âœˆï¸" }
                ]
            }
        ];

        let currentTribeIndex = 2; // Default to Hardcore
        let isOrderMode = false;
        let cart = {}; // { productName: qty }

        function selectTribe(index) {
            currentTribeIndex = index;
            // Reset order mode when switching tribes
            isOrderMode = false;
            cart = {};
            updateUI();
        }

        function toggleOrderMode() {
            isOrderMode = !isOrderMode;
            // Initialize cart with at least 1 of each item or just 0?
            // Let's init with 0
            if(isOrderMode) {
                 const data = tribeData[currentTribeIndex];
                 data.products.forEach(p => {
                     if(!cart[p.name]) cart[p.name] = 0;
                 });
            }
            updateUI();
        }

        function updateUI() {
            const data = tribeData[currentTribeIndex];
            const panel = document.getElementById('recPanel');
            const joinBtn = document.getElementById('joinBtn');
            const orderBtn = document.getElementById('orderBtn'); // Need to add ID
            const settlementPanel = document.getElementById('settlementPanel'); // Need to add
            
            // æ¿€æ´»é¢æ¿
            panel.classList.remove('opacity-50', 'pointer-events-none');
            panel.classList.add('opacity-100', 'pointer-events-auto');

            // æ¿€æ´» Join æŒ‰é’® (Always active unless ordering? Maybe disable join when ordering)
            joinBtn.classList.remove('bg-slate-700', 'text-slate-400', 'cursor-not-allowed');
            joinBtn.classList.add('bg-indigo-600', 'hover:bg-indigo-500', 'text-white', 'shadow-lg', 'shadow-indigo-900/50');

            // Order Button State
            if(isOrderMode) {
                orderBtn.innerHTML = `<span>å–æ¶ˆç‚¹å•</span><i class="fa-solid fa-xmark"></i>`;
                orderBtn.classList.remove('bg-emerald-600', 'hover:bg-emerald-500', 'border-emerald-500/30');
                orderBtn.classList.add('bg-slate-700', 'hover:bg-slate-600', 'border-slate-500/30');
            } else {
                orderBtn.innerHTML = `<span>ä¸€é”®å¼ç‚¹å•</span><i class="fa-solid fa-receipt group-hover:rotate-12 transition-transform"></i>`;
                orderBtn.classList.add('bg-emerald-600', 'hover:bg-emerald-500', 'border-emerald-500/30');
                orderBtn.classList.remove('bg-slate-700', 'hover:bg-slate-600', 'border-slate-500/30');
            }

            // Update Left Info
            const titleEl = document.getElementById('selectedTribeName');
            titleEl.textContent = data.name;
            document.getElementById('selectedTribeDesc').textContent = data.desc;

            // Render List
            renderProductList(data);

            // Toggle Settlement Panel
            if(isOrderMode) {
                settlementPanel.classList.remove('hidden');
                updateTotal();
            } else {
                settlementPanel.classList.add('hidden');
            }
        }

        function renderProductList(data) {
            const container = document.getElementById('recContainer');
            container.innerHTML = '';
            
            data.products.forEach((p, idx) => {
                const qty = cart[p.name] || 0;
                const controlsHtml = isOrderMode ? `
                    <div class="flex items-center gap-3 bg-slate-900 rounded-lg p-2 border border-slate-700 ml-3 shrink-0" onclick="event.stopPropagation()">
                        <button onclick="updateQty('${p.name}', -1)" class="w-9 h-9 rounded hover:bg-slate-800 text-slate-400 hover:text-white flex items-center justify-center transition-colors ${qty === 0 ? 'opacity-30 cursor-not-allowed' : 'active:bg-slate-700'}">
                            <i class="fa-solid fa-minus text-sm"></i>
                        </button>
                        <span class="w-8 text-center font-mono font-bold text-white text-xl">${qty}</span>
                        <button onclick="updateQty('${p.name}', 1)" class="w-9 h-9 rounded hover:bg-slate-800 text-slate-400 hover:text-white flex items-center justify-center transition-colors active:bg-slate-700">
                            <i class="fa-solid fa-plus text-sm"></i>
                        </button>
                    </div>
                ` : ``;


                const nameClass = isOrderMode 
                    ? "font-bold text-slate-100 text-base leading-tight group-hover:text-amber-100 transition-colors"
                    : "font-bold text-slate-100 text-base group-hover:text-amber-100 transition-colors";

                const html = `
                    <div class="bg-slate-800/40 border ${qty > 0 ? 'border-amber-500/50 bg-amber-500/5' : 'border-slate-700/50'} p-2.5 rounded-xl flex items-center gap-3 hover:bg-slate-700/40 transition-colors group cursor-pointer relative overflow-hidden list-enter">
                        <div class="w-12 h-12 rounded-lg bg-slate-900 flex items-center justify-center text-2xl shrink-0 border border-white/5 shadow-inner">
                            ${p.icon}
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-baseline mb-0.5">
                                <h4 class="${nameClass}">${p.name}</h4>
                                <span class="text-amber-500 text-base font-bold font-mono whitespace-nowrap ml-3">Â¥${p.price}</span>
                            </div>
                            <p class="text-sm text-slate-400 mt-0.5 leading-snug">${p.desc}</p>
                            ${!isOrderMode ? `
                            <div class="flex gap-1.5 mt-1.5">
                                ${p.tags.map(t => `<span class="px-1.5 py-0.5 rounded bg-slate-700/80 text-xs text-slate-300 border border-slate-600/30">${t}</span>`).join('')}
                            </div>` : ''}
                        </div>
                        ${controlsHtml}
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        function updateQty(name, delta) {
            if(!cart[name]) cart[name] = 0;
            const newQty = cart[name] + delta;
            if(newQty >= 0) {
                cart[name] = newQty;
                updateUI(); // Re-render to show border highlight
            }
        }

        function updateTotal() {
            const data = tribeData[currentTribeIndex];
            let total = 0;
            data.products.forEach(p => {
                total += p.price * (cart[p.name] || 0);
            });
            document.getElementById('settlementTotal').innerText = `Â¥ ${total}`;
        }

        function payOrder() {
            const btn = document.getElementById('payBtn');
            const originalContent = btn.innerHTML;
            
            // Check if cart empty
            const data = tribeData[currentTribeIndex];
            let totalQty = 0;
            data.products.forEach(p => totalQty += (cart[p.name] || 0));
            
            if(totalQty === 0) return;

            btn.innerHTML = `<i class="fa-solid fa-check"></i> <span>æ”¯ä»˜æˆåŠŸ</span>`;
            btn.classList.remove('bg-amber-500', 'text-slate-900');
            btn.classList.add('bg-emerald-500', 'text-white');
            
            setTimeout(() => {
                toggleOrderMode();
                setTimeout(() => {
                    btn.innerHTML = originalContent;
                    btn.classList.add('bg-amber-500', 'text-slate-900');
                    btn.classList.remove('bg-emerald-500', 'text-white');
                }, 300);
            }, 1000);
        }

        function renderTribes() {
            const container = document.getElementById('tribeContainer');
            container.innerHTML = '';
            tribeData.forEach((t, i) => {
                const id = `tribe${i+1}`;
                const html = `
                <div class="relative group">
                    <input type="radio" name="tribe" id="${id}" class="tribe-radio hidden" onchange="selectTribe(${i})" ${i===0?'checked':''}>
                    <label for="${id}" class="tribe-card block h-full p-6 rounded-2xl glass-panel border border-slate-700/50 cursor-pointer hover:bg-white/5 relative overflow-hidden flex flex-row lg:flex-col items-center lg:items-start gap-4 lg:gap-0">
                        <!-- Icon -->
                        <div class="w-14 h-14 rounded-full bg-slate-800 flex items-center justify-center text-3xl mb-0 lg:mb-4 group-hover:scale-110 transition-transform duration-500 shrink-0 border border-white/5">
                            ${t.icon}
                        </div>
                        
                        <div class="flex-1">
                            <h3 class="text-lg font-bold text-slate-100 serif-font flex items-center justify-between w-full">
                                ${t.name}
                                <div class="w-5 h-5 rounded-full bg-amber-500 flex items-center justify-center check-icon text-black text-xs"><i class="fa-solid fa-check"></i></div>
                            </h3>
                            <p class="text-xs text-slate-400 mt-2 leading-relaxed line-clamp-2">${t.sub}</p>
                        </div>
                    </label>
                </div>
                `;
                container.innerHTML += html;
            });
        }

        // Init
        // Pre-run
        setTimeout(() => selectTribe(2), 100);

        // --- Member Modal Logic ---
        function openMemberModal() {
            const modal = document.getElementById('memberModal');
            const content = document.getElementById('memberModalContent');
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0', 'pointer-events-none');
                modal.classList.add('opacity-100', 'pointer-events-auto');
                content.classList.remove('scale-95');
                content.classList.add('scale-100');
            }, 10);
        }

        function closeMemberModal() {
            const modal = document.getElementById('memberModal');
            const content = document.getElementById('memberModalContent');
            content.classList.remove('scale-100');
            content.classList.add('scale-95');
            modal.classList.remove('opacity-100', 'pointer-events-auto');
            modal.classList.add('opacity-0', 'pointer-events-none');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        function simulateScan() {
            const btn = event.currentTarget;
            const icon = btn.querySelector('i');
            const input = document.getElementById('wechatInput');
            
            icon.classList.remove('fa-qrcode');
            icon.classList.add('fa-spinner', 'fa-spin');
            
            setTimeout(() => {
                input.value = "wxid_" + Math.random().toString(36).substring(7);
                icon.classList.remove('fa-spinner', 'fa-spin');
                icon.classList.add('fa-check');
                setTimeout(() => icon.classList.replace('fa-check', 'fa-qrcode'), 2000);
            }, 1000);
        }

        function saveMemberInfo() {
            const wx = document.getElementById('wechatInput').value.trim();
            const phone = document.getElementById('phoneInput').value.trim();
            
            // éªŒè¯å·²ç§»é™¤ï¼Œç›´æ¥ä¿å­˜æˆåŠŸ
            
            const btn = document.getElementById('saveMemberBtn');
            const originalHtml = btn.innerHTML;
            btn.innerHTML = `<i class="fa-solid fa-spinner fa-spin"></i> å¤„ç†ä¸­...`;
            
            setTimeout(() => {
                closeMemberModal();
                btn.innerHTML = originalHtml;
                
                // Update Join Button
                const joinBtn = document.getElementById('joinBtn');
                if(joinBtn) {
                     joinBtn.innerHTML = `<span>å·²åŠ å…¥</span><i class="fa-solid fa-check"></i>`;
                     joinBtn.className = "w-full py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 group bg-emerald-600 text-white shadow-lg cursor-default";
                     joinBtn.onclick = null;
                }
            }, 1000);
        }

    </script>
    
    <!-- Modal Markup -->
    <div id="memberModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center bg-black/80 backdrop-blur-sm transition-opacity duration-300 opacity-0 pointer-events-none">
        <div class="bg-slate-900/90 border border-slate-700/50 p-8 rounded-2xl w-full max-w-md relative shadow-2xl transform scale-95 transition-transform duration-300" id="memberModalContent">
            <button onclick="closeMemberModal()" class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10">
                <i class="fa-solid fa-xmark"></i>
            </button>
            
            <h3 class="text-2xl font-bold text-white mb-6 flex items-center gap-3 serif-font">
                <span class="w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400 border border-indigo-500/30">
                    <i class="fa-solid fa-user-plus text-sm"></i>
                </span>
                åŠ å…¥éƒ¨è½
            </h3>
            
            <div class="space-y-6">
                <!-- WeChat Input -->
                <div class="space-y-2">
                    <label for="wechatInput" class="text-xs font-bold text-slate-400 flex items-center gap-2 uppercase tracking-wider">
                        <i class="fa-brands fa-weixin text-emerald-500"></i> WeChat Info
                    </label>
                    <div class="flex gap-2">
                        <input type="text" id="wechatInput" placeholder="è¾“å…¥å¾®ä¿¡å·" class="flex-1 bg-black/40 border border-slate-700 rounded-xl px-4 py-3 text-white focus:border-indigo-500 focus:outline-none transition-colors placeholder:text-slate-600">
                        <button onclick="simulateScan()" class="bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white px-4 py-3 rounded-xl border border-slate-700 transition-colors" title="æ‰«ç å½•å…¥">
                            <i class="fa-solid fa-qrcode"></i>
                        </button>
                    </div>
                </div>

                <div class="flex items-center gap-4">
                    <div class="h-px bg-slate-800 flex-1"></div>
                    <span class="text-slate-600 text-[10px] font-bold uppercase tracking-widest">Optional Selection</span>
                    <div class="h-px bg-slate-800 flex-1"></div>
                </div>

                <!-- Phone Input -->
                <div class="space-y-2">
                    <label for="phoneInput" class="text-xs font-bold text-slate-400 flex items-center gap-2 uppercase tracking-wider">
                        <i class="fa-solid fa-phone text-amber-400"></i> Phone Number
                    </label>
                    <input type="tel" id="phoneInput" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" class="w-full bg-black/40 border border-slate-700 rounded-xl px-4 py-3 text-white focus:border-indigo-500 focus:outline-none transition-colors placeholder:text-slate-600">
                </div>
                
                <div class="bg-amber-500/5 border border-amber-500/10 rounded-xl p-3 flex items-start gap-3">
                    <i class="fa-solid fa-circle-info text-amber-500 mt-0.5 text-xs"></i>
                    <p class="text-xs text-amber-500/80 leading-relaxed">
                        ä¸ºäº†æ‚¨çš„è´¦æˆ·å®‰å…¨ä¸æœåŠ¡ä½“éªŒï¼Œè¯·è‡³å°‘ç»‘å®šä¸€é¡¹è”ç³»æ–¹å¼ã€‚
                    </p>
                </div>

                <button id="saveMemberBtn" onclick="saveMemberInfo()" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-indigo-900/40 active:scale-[0.98] transition-all flex items-center justify-center gap-2 border border-indigo-400/20">
                    <span>ç¡®è®¤å¹¶åŠ å…¥</span>
                    <i class="fa-solid fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
    </script>
</body></html>